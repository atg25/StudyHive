<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Try StudyHive's AI-powered study tools. Generate summaries, flashcards, and podcasts from your notes. No signup required."
    />
    <link rel="icon" href="assets/icons/hexagon.svg" />
    <title>Playground - STUDYHIVE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&family=Inter:wght@400;600&family=JetBrains+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/base.css" />
    <link rel="stylesheet" href="assets/css/playground.css" />
    <style>
      /* Paywall Modal */
      .paywall-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        align-items: center;
        justify-content: center;
      }

      .paywall-content {
        background: var(--black);
        color: var(--white);
        max-width: 500px;
        padding: 2.5rem;
        border: 4px solid var(--honey);
        text-align: center;
      }

      .paywall-content h2 {
        font-family: "Space Grotesk", sans-serif;
        font-size: 2rem;
        margin-bottom: 1rem;
        text-transform: uppercase;
        color: var(--honey);
      }

      .paywall-content p {
        margin-bottom: 2rem;
        font-size: 1.1rem;
      }

      .paywall-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
      }

      .paywall-button {
        padding: 1rem 2rem;
      }

      /* Terms of Service Modal */
      .tos-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        overflow-y: auto;
      }

      .tos-content-box {
        background: #0a0a0a;
        color: #ffffff;
        max-width: 900px;
        margin: 2rem auto;
        padding: 2rem;
        border: 4px solid #ffffff;
        max-height: 80vh;
        overflow-y: auto;
      }

      .tos-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        border-bottom: 3px solid #ffffff;
        padding-bottom: 1rem;
      }

      .tos-header h2 {
        margin: 0;
        font-family: "Space Grotesk", sans-serif;
        text-transform: uppercase;
      }

      .tos-close-btn {
        background: none;
        border: none;
        color: #ffffff;
        font-size: 2rem;
        cursor: pointer;
        padding: 0;
        width: 2rem;
        height: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #tosContent {
        font-family: "Inter", sans-serif;
        line-height: 1.8;
        font-size: 0.95rem;
      }

      /* Footer button styling */
      .tos-button {
        background: none;
        border: none;
        color: #ffb800;
        cursor: pointer;
        text-decoration: underline;
        font-size: 0.8rem;
      }

      .download-link {
        display: inline-block;
        text-decoration: none;
      }

      .hexagon-icon {
        width: 24px;
        height: 24px;
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <a href="../index.html" class="logo"
          ><img
            src="assets/icons/hexagon.svg"
            alt=""
            style="
              width: 24px;
              height: 24px;
              vertical-align: middle;
              margin-right: 8px;
              margin-bottom: 8px;
            "
          />STUDYHIVE</a
        >
        <ul class="nav-links">
          <li><a href="../index.html#features">Features</a></li>
          <li><a href="../index.html#pricing">Pricing</a></li>
          <li><a href="playground.html">Playground</a></li>
          <li><a href="#" id="accountLink">Account</a></li>
        </ul>
      </nav>
    </header>

    <section class="hero">
      <h1>FEATURE PLAYGROUND</h1>
      <p class="subtitle">
        Try StudyHive's AI tools with sample CS 101 notes. No signup required.
      </p>
    </section>

    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="summary">AI Summaries</button>
      <button class="tab-btn" data-tab="flashcards">Flashcards</button>
      <button class="tab-btn" data-tab="podcast">Tutoring Podcasts</button>
    </nav>

    <!-- AI SUMMARY TAB -->
    <div class="tab-content active" id="summary">
      <div class="summary-container">
        <div class="summary-header-section">
          <img src="assets/icons/notes.svg" alt="" class="section-icon" />
          <h3>AI-Generated Summary</h3>
          <p>Convert your notes into a concise, structured summary</p>
        </div>

        <div class="demo-controls">
          <label for="notes">Your Notes:</label>
          <textarea
            id="notes"
            placeholder="Paste your class notes here..."
            readonly
          ></textarea>

          <button class="btn btn-primary" id="generateBtn">
            Generate Summary
          </button>
        </div>

        <div class="loading" id="loading">
          <div class="hexagon-spinner">
            <img src="assets/icons/hexagon.svg" alt="" class="hexagon-icon" />
          </div>
          <div>Processing...</div>
        </div>

        <div class="summary-output" id="summaryOutput">
          <div class="summary-text" id="summaryText"></div>
        </div>
      </div>
    </div>

    <!-- FLASHCARDS TAB -->
    <div class="tab-content" id="flashcards">
      <div class="flashcard-container">
        <div class="flashcard-header-section">
          <img src="assets/icons/flashCard.svg" alt="" class="section-icon" />
          <h3>AI-Generated Flashcards</h3>
          <p>Convert your notes into interactive study flashcards</p>
        </div>

        <div class="flashcard-controls">
          <button
            class="btn btn-primary"
            id="generateFlashcardsBtn"
            onclick="generateFlashcards()"
          >
            Generate Flashcards
          </button>
        </div>

        <div class="loading" id="flashcardLoading">
          <div class="hexagon-spinner">
            <img src="assets/icons/hexagon.svg" alt="" class="hexagon-icon" />
          </div>
          <div>Generating flashcards...</div>
        </div>

        <div id="flashcardDisplay" style="display: none">
          <div class="simple-flashcard" id="simpleCard" onclick="flipCard()">
            <div id="cardContent">
              <h2 id="cardTitle">QUESTION</h2>
              <p id="cardText">What is binary search?</p>
            </div>
          </div>

          <div class="flashcard-nav">
            <button class="card-nav-btn" onclick="prevCard()">
              ← Previous
            </button>
            <span id="cardCount">Card 1 of 4</span>
            <button class="card-nav-btn" onclick="nextCard()">Next →</button>
          </div>

          <p class="card-hint">Click the card to flip it!</p>
        </div>
      </div>
    </div>

    <!-- PODCAST TAB -->
    <div class="tab-content" id="podcast">
      <div class="podcast-container">
        <div class="podcast-header-section">
          <img src="assets/icons/microphone.svg" alt="" class="section-icon" />
          <h3>AI-Generated Study Podcast</h3>
          <p>Convert your AI summary into a natural-sounding audio podcast</p>
        </div>

        <div class="podcast-controls">
          <button class="btn btn-primary" id="generatePodcastBtn">
            Generate Podcast
          </button>
        </div>

        <div class="podcast-player" id="podcastPlayer">
          <h4>Your Podcast is Ready!</h4>
          <audio controls id="audioPlayer" class="audio-player">
            <source id="audioSource" type="audio/mpeg" />
            Your browser does not support audio playback.
          </audio>
          <a
            href="#"
            id="downloadPodcast"
            download
            class="btn btn-primary download-link"
          >
            Download MP3
          </a>
        </div>

        <div class="podcast-info">
          <h4>How it works:</h4>
          <ul>
            <li>1) First, generate an AI summary from your notes</li>
            <li>2) Then click "Generate Podcast" to convert it to audio</li>
            <li>3) Listen while commuting, exercising, or studying</li>
            <li>4) Download the MP3 for offline listening</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- Paywall Modal -->
    <div id="paywallModal" class="paywall-modal">
      <div class="paywall-content">
        <h2>Premium Feature</h2>
        <p>Customize notes and topics with a Plus or Premium account</p>
        <div class="paywall-buttons">
          <button id="upgradeBtn" class="btn paywall-button">
            Upgrade Now
          </button>
          <button id="closePaywallBtn" class="btn btn-secondary paywall-button">
            Close
          </button>
        </div>
      </div>
    </div>

    <footer>
      <p>
        © 2025 STUDYHIVE | Built by students, for students | NJIT IT310 Capstone
        Project
      </p>
      <p style="margin-top: 1rem; font-size: 0.8rem">
        Team: Andrew Gardner, Jovan Fernandez, Umar Farooq, Elliot Cecere
      </p>
      <p style="margin-top: 1rem">
        <button id="tosBtn" class="tos-button">Terms of Service</button>
      </p>
    </footer>

    <!-- Terms of Service Modal -->
    <div id="tosModal" class="tos-modal">
      <div class="tos-content-box">
        <div class="tos-header">
          <h2>Terms of Service</h2>
          <button id="closeTosBtn" class="tos-close-btn">×</button>
        </div>
        <div id="tosContent"></div>
      </div>
    </div>

    <script src="assets/js/playground-data.js"></script>
    <script src="assets/js/playground.js"></script>
    <script src="assets/js/tos-modal.js"></script>
    <script src="assets/js/auth.js"></script>
    <script>
      var paywallModal = document.getElementById("paywallModal");
      var closePaywallBtn = document.getElementById("closePaywallBtn");
      var upgradeBtn = document.getElementById("upgradeBtn");
      var notesField = document.getElementById("notes");

      function checkPaywall() {
        var user = getCurrentUser();
        return user && (user.plan === "plus" || user.plan === "premium");
      }

      function showPaywall() {
        paywallModal.style.display = "flex";
      }

      // Remove readonly if user has paid plan
      if (checkPaywall()) {
        notesField.removeAttribute("readonly");
      }

      // Close paywall
      closePaywallBtn.addEventListener("click", function () {
        paywallModal.style.display = "none";
      });

      // Upgrade button
      upgradeBtn.addEventListener("click", function () {
        window.location.href = "signup.html?plan=plus";
      });

      // Show paywall when user tries to edit notes
      notesField.addEventListener("focus", function () {
        if (!checkPaywall()) {
          notesField.blur();
          showPaywall();
        }
      });

      // Account link - navigate based on login status
      document
        .getElementById("accountLink")
        .addEventListener("click", function (e) {
          e.preventDefault();
          if (isLoggedIn()) {
            window.location.href = "account.html";
          } else {
            window.location.href = "signin.html";
          }
        });

      // Simple flashcard logic
      var cards = [
        {
          q: "What is binary search?",
          a: "An algorithm that finds an item in a sorted list by repeatedly dividing the search interval in half.",
        },
        {
          q: "What is the time complexity?",
          a: "O(log n) - logarithmic time complexity.",
        },
        {
          q: "When can you use binary search?",
          a: "Only on sorted arrays or lists.",
        },
        {
          q: "How does binary search eliminate elements?",
          a: "By comparing the target with the middle element and eliminating half the remaining elements each time.",
        },
      ];

      var currentIndex = 0;
      var showingAnswer = false;

      function generateFlashcards() {
        var btn = document.getElementById("generateFlashcardsBtn");
        var loading = document.getElementById("flashcardLoading");
        var display = document.getElementById("flashcardDisplay");

        btn.disabled = true;
        loading.classList.add("active");
        display.style.display = "none";

        setTimeout(function () {
          loading.classList.remove("active");
          display.style.display = "block";
          currentIndex = 0;
          showingAnswer = false;
          document.getElementById("cardTitle").textContent = "QUESTION";
          document.getElementById("cardText").textContent = cards[0].q;
          document.getElementById("cardCount").textContent =
            "Card 1 of " + cards.length;
          document.getElementById("simpleCard").style.background =
            "var(--gray)";
          document.getElementById("simpleCard").style.color = "var(--white)";
          btn.disabled = false;
        }, 1000);
      }

      function flipCard() {
        showingAnswer = !showingAnswer;
        if (showingAnswer) {
          document.getElementById("cardTitle").textContent = "ANSWER";
          document.getElementById("cardTitle").style.color = "var(--black)";
          document.getElementById("cardText").textContent =
            cards[currentIndex].a;
          document.getElementById("simpleCard").style.background =
            "var(--honey)";
          document.getElementById("simpleCard").style.color = "var(--black)";
        } else {
          document.getElementById("cardTitle").textContent = "QUESTION";
          document.getElementById("cardTitle").style.color = "var(--honey)";
          document.getElementById("cardText").textContent =
            cards[currentIndex].q;
          document.getElementById("simpleCard").style.background =
            "var(--gray)";
          document.getElementById("simpleCard").style.color = "var(--white)";
        }
      }

      function nextCard() {
        if (currentIndex < cards.length - 1) {
          currentIndex++;
          showingAnswer = false;
          document.getElementById("cardTitle").textContent = "QUESTION";
          document.getElementById("cardText").textContent =
            cards[currentIndex].q;
          document.getElementById("cardCount").textContent =
            "Card " + (currentIndex + 1) + " of " + cards.length;
          document.getElementById("simpleCard").style.background =
            "var(--gray)";
          document.getElementById("simpleCard").style.color = "var(--white)";
        }
      }

      function prevCard() {
        if (currentIndex > 0) {
          currentIndex--;
          showingAnswer = false;
          document.getElementById("cardTitle").textContent = "QUESTION";
          document.getElementById("cardText").textContent =
            cards[currentIndex].q;
          document.getElementById("cardCount").textContent =
            "Card " + (currentIndex + 1) + " of " + cards.length;
          document.getElementById("simpleCard").style.background =
            "var(--gray)";
          document.getElementById("simpleCard").style.color = "var(--white)";
        }
      }
    </script>
  </body>
</html>
